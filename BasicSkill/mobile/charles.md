<!--
abbrlink: occuidd3
-->

### 移动端场景下使用 Charles 代理的优点

* 解决`移动端真机接口调用不便查看`的问题。
* 有利于解决`发布到线上环境判断接口是否正常`的问题。

### 场景一: 代理查询接口请求数据

`使用场景`: 使用代理查询接口请求数据, 解决`移动端真机访问页面时查看不了接口调用情况`的问题。

* 方法:
  1. 打开 Charles, 配置手机可以代理的端口。菜单栏点击 `Proxy` -> `Proxy Settings`。
    ![](http://with.muyunyun.cn/ec841f0461fa4b37cc333d24127785ee.jpg-400)
  2. 在手机中打开配置代理页面, 设置代理地址。
     1. 服务器地址: 代理控制台中(内网互联)手机抓包代理列表中的`代理 host`。
     2. 端口: 代理控制台中(内网互联)手机抓包代理列表中的`代理端口`(在上图中, 映射至端口 8888)。
     3. 认证: 默认关闭。
  3. Charles 上设置要抓包的 https 地址。(http 地址则不需要进行这一步)
     1. 菜单栏点击 `Proxy` -> `SSL Proxying Settings`
  4. 手机装证书。注意此时手机一定要连代理，然后用手机浏览器访问 `chls.pro/ssl`。浏览器会自动下载软件然后安装。(如果无法自动下载, 请确认内网互联, 手机抓包配置是否正确。)

### 技巧二: 使用本地前端代码调试测试环境数据

`使用场景`: 使用本地前端代码调试测试环境数据

* 方法: 将测试环境域名代理到本地。
  1. 菜单栏点击 `Tools` -> `Map Remote`。
  2. 配置测试环境与本地域名。

> 此时需要将系统设置中的网络代理一栏，全部取消勾选(这里安利笔者写的 [flow 插件](https://)，支持快速切换代理环境)，然后重启 Charles。

![](http://with.muyunyun.cn/863fdb087e9b32eabf0c4b3a607235f8.jpg)

### 场景一与场景二结合使用

场景一与场景二是能同时使用的，以达到在真机侧调试本地的代码访问线上的数据。

### Charles 的不足?

